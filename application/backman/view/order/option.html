{extend name="layout" /}
{block name="content"}
<div class="layui-tab layui-tab-brief">
	<ul class="layui-tab-title">
	    <li class="layui-this">订单信息</li>
  	</ul>
</div>
<div class="layui-card-body">
	<fieldset class="layui-elem-field layui-field-title" style="margin-top: 50px;">
		<legend>基本信息</legend>
	</fieldset>

	<table class="layui-table">
		<colgroup>
			<col width="100">
			<col width="100">
			<col width="100">
			<col width="100">
		</colgroup>
		<thead>
		<tr>
			<th>订单号</th>
			<th>下单用户</th>
			<th>运费（元）</th>
			<th>订单金额（元）</th>
		</tr>
		</thead>
		<tbody>
		<tr>
			<td>{$order.order_sn}</td>
			<td>{$order.user_name}</td>
			<td>{$order.freight_money}</td>
			<td>{$order.money}</td>
		</tr>

		</tbody>

		<thead>
		<tr>
			<th>订单状态</th>
			<th>支付状态</th>
			<th>支付时间</th>
			<th>下单时间</th>
		</tr>
		</thead>
		<tbody>
		<tr>
			<td>{$order.status_name}</td>
			<td>{$order.pay_status_name}</td>
			<td>{$order.pay_time}</td>
			<td>{$order.created_at}</td>
		</tr>

		</tbody>
	</table>
	
	<fieldset class="layui-elem-field layui-field-title" style="margin-top: 50px;">
		<legend>代理信息</legend>
	</fieldset>

	<table class="layui-table">
		<colgroup>
			<col width="300">
		</colgroup>
		<thead>
		<tr>
			<th>代理商</th>
		</tr>
		</thead>
		<tbody>
		<tr>
			<td>{$order.agent}</td>
		</tr>
		</tbody>
	</table>


	<div class="layui-row">
		<div class="layui-col-xs3">
			<div class="grid-demo grid-demo-bg1">代理商：{$order.agent}</div>
		</div>
	</div>

	<fieldset class="layui-elem-field layui-field-title" style="margin-top: 50px;">
		<legend>收货人信息</legend>
	</fieldset>

	<table class="layui-table">
		<colgroup>
			<col width="100">
			<col width="100">
			<col width="100">
			<col width="100">
		</colgroup>
		<thead>
		<tr>
			<th>姓名</th>
			<th>手机</th>
			<th>详细地址</th>
			<th>运费（元）</th>
		</tr>
		</thead>
		<tbody>
		<tr>
			<td>{$order.name}</td>
			<td>{$order.phone}</td>
			<td>{$order.province}{$order.city}{$order.area}{$order.address}</td>
			<td>{$order.freight_money}</td>
		</tr>
		</tbody>
	</table>
	<fieldset class="layui-elem-field layui-field-title" style="margin-top: 50px;">
		<legend>商品信息</legend>
	</fieldset>
	<table class="layui-table">
		<colgroup>
			<col width="300">
			<col width="100">
			<col width="100">
			<col width="100">
		</colgroup>
		<thead>
		<tr>
			<th>商品名称</th>
			<th>数量(件)</th>
			<th>单价（元）</th>
			<th>总金额（元）</th>
		</tr>
		</thead>
		<tbody>
		{foreach $order.goods_list as $vo}
		<tr>
			<td>{$vo.info.title}</td>
			<td>{$vo.number}{if ( $vo['number'] > $vo['info']['stock'])}
			<span style="color: red;">({$vo.info.stock})</span>
			{else /} <span style="color: green;">({$vo.info.stock})</span>
			{/if}</td>
			<td>{$vo.price}</td>
			<td>{:sprintf("%.2f",$vo['price'] * $vo['number'])}</td>
		</tr>
		{/foreach}
		</tbody>
	</table>


	{if condition="$order.status eq 4"}
	<form class="layui-form" data-model="form-submit">
		<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
			<legend>物流信息</legend>
		</fieldset>
		<div class="layui-form-item">
			<label class="layui-form-label">物流公司</label>
			<div class="layui-input-block">
				<select name="express_id">
					{foreach $ex_company as $vo}
					<option value="{$vo.id}" {if $vo.id eq $order.express_id}selected=""{/if}>{$vo['name']|raw}</option>
					{/foreach}

				</select>
			</div>
		</div>
		<div class="layui-form-item">
			<label class="layui-form-label">物流单号</label>
			<div class="layui-input-block">
				<input type="text" class="layui-input" name="sn" value="{$order['express']}">
			</div>
		</div>
		<div class="layui-form-item">
			<div class="layui-input-block">
				<input type="hidden" name="id" value="{$order['id']}">
				<button class="layui-btn layui-btn-normal">保存</button>
				<button type="reset" class="layui-btn layui-btn-primary">重置</button>
			</div>
		</div>
	</form>
	{/if}
	{if condition="$order.status eq 2 or $order.status eq 3"}
	<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
		<legend>物流信息</legend>
	</fieldset>
	<div class="layui-row">
		<div class="layui-col-xs6">
			<div class="grid-demo grid-demo-bg1">物流公司：{$order.express_name}</div>
		</div>
		<div class="layui-col-xs6">
			<div class="grid-demo">物流单号：{$order.express}</div>
		</div>
	</div>
	{/if}

</div>
{/block}
{block name="js"}
<script type="text/javascript">
var mixin = {};
layui.use('form',function(){
	var form = layui.form
});
</script>
{/block}