{extend name="layout" /}
{block name="content"}
<div class="layui-tab layui-tab-brief">
    <ul class="layui-tab-title">
        <li><a href="{:url('index')}">{$pathCurrent['name']}</a></li>
        <li class="layui-this">{empty name="info"}新增{else /}编辑{/empty}套餐</li>
    </ul>
</div>
<div class="layui-card-body">
    <form class="layui-form" data-model="form-submit">
        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
            <legend>基本设置</legend>
        </fieldset>
        <div class="layui-form-item">
            <label class="layui-form-label">名称</label>
            <div class="layui-input-block">
                <input type="text" class="layui-input" name="name" value="{$info['name']}" datatype="*">
            </div>
        </div>
        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
            <legend>代理价格</legend>
        </fieldset>
        <div class="layui-row">
            {foreach $level as $vo}
            <div class="layui-col-xs2">
                <div class="layui-form-item">
                    <label class="layui-form-label">{$vo['name']}</label>
                    <div class="layui-input-block">
                        <input type="text" class="layui-input" name="level[{$vo['id']}]" value="{$levels[$vo['id']]}" datatype="*">
                    </div>
                </div>
            </div>
            {/foreach}
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">会员价格</label>
            <div class="layui-input-block">
                <input type="text" class="layui-input" name="price" value="{$info['price']}" datatype="*">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">当前库存数量</label>
            <div class="layui-input-block">
                <input type="text" class="layui-input" name="stock" value="{$info['stock']}" datatype="*">
            </div>
        </div>
        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
            <legend>单品分销</legend>
        </fieldset>
        <div class="layui-form-item">
            <label class="layui-form-label">状态</label>
            <div class="layui-input-block">
                {php}$is_fen= isset($info['is_fen']) ? $info['is_fen'] :0;{/php}
                <input type="radio" name="is_fen" value="1" title="开启" {if $is_fen eq 1} checked="" {/if}>
                <input type="radio" name="is_fen" value="0" title="关闭" {if $is_fen eq 0} checked="" {/if}>
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">分销结算时间</label>
            <div class="layui-input-block">
                {php}$fen_time= isset($info['fen_time']) ? $info['fen_time'] : 0;{/php}
                <input type="radio" name="fen_time" value="2" title="付款后" {if $fen_time eq 2} checked="" {/if}>
                <input type="radio" name="fen_time" value="1" title="确认收货后" {if $fen_time eq 1} checked="" {/if}>
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">分销方式</label>
            <div class="layui-input-block">
                {php}$fen_type = isset($info['fen_type']) ? $info['fen_type'] : '1';{/php}
                <input type="radio" name="fen_type" value="1" title="固定金额" {if $fen_type eq 1} checked="" {/if}>
                <input type="radio" name="fen_type" value="2" title="金额百分比" {if $fen_type eq 2} checked="" {/if}>
            </div>
        </div>

        <div class="layui-row">
            <div class="layui-col-xs2">
                <div class="layui-form-item">
                    <label class="layui-form-label">一级</label>
                    <div class="layui-input-block">
                        <input type="text" class="layui-input" name="fen[1]" value="{$fen[1] ?? 0}" datatype="*">
                    </div>
                </div>
            </div>
            <div class="layui-col-xs2">
                <div class="layui-form-item">
                    <label class="layui-form-label">二级</label>
                    <div class="layui-input-block">
                        <input type="text" class="layui-input" name="fen[2]" value="{$fen[2] ?? 0}" datatype="*">
                    </div>
                </div>
            </div>
        </div>
        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
            <legend>其他</legend>
        </fieldset>
        <div class="layui-form-item">
            <label class="layui-form-label">运费模板</label>
            <div class="layui-input-block">
                <select name="express_id" datatype="*">
                    <option value="">请选择运费模板</option>
                    {foreach $express as $vo}
                    <option value="{$vo['id']}" {if $vo['id'] eq $info['express_id']}selected=""{/if}>{$vo['name']}（{$vo['method']['text']}）</option>
                    {/foreach}
                </select>
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">初始销量</label>
            <div class="layui-input-block">
                <input type="text" class="layui-input" name="sales" value="{$info['sales'] ? $info['sales'] : '0'}">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">商品重量(Kg)</label>
            <div class="layui-input-block">
                <input type="text" class="layui-input" name="weight" value="{$info['weight']}" datatype="*">
            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-input-block">
                <input type="hidden" name="id" value="{$info['id']}">
                <button class="layui-btn layui-btn-normal">保存</button>
                <button type="reset" class="layui-btn layui-btn-primary">重置</button>
            </div>
        </div>
    </form>
</div>
{/block}
{block name="js"}
<script type="text/javascript">
    var mixin = {};
    layui.use('form',function(){
        var form = layui.form
    });
</script>
{/block}